!function a(r,o,u){function l(t,e){if(!o[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(i)return i(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=o[t]={exports:{}},r[t][0].call(n.exports,function(e){return l(r[t][1][e]||e)},n,n.exports,a,r,o,u)}return o[t].exports}for(var i="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var l=o(e("./utlis/log")),a=o(e("./utlis/crud")),r=o(e("./utlis/getAllRequest")),i=o(e("./utlis/parseJSONData")),d=o(e("./utlis/promiseGenerator"));function o(e){return e&&e.__esModule?e:{default:e}}var s=void 0,u=void 0,c={};function f(t,e){var n=s.transaction([t]),a="now "+t+" 's max key is "+c[t];(c[t]=0,r.default)(n,t).onsuccess=function(e){e=e.target.result;e&&(c[t]=e.value.id,e.continue())},d.default.transaction(n,a).then(e)}n.default={open:function(n){return new Promise(function(e,t){var r,o;window.indexedDB?(r=n,o=e,(e=window.indexedDB.open(r.name,r.version)).onblocked=function(){l.default.fail("Please close all other tabs with this site open")},e.onupgradeneeded=function(e){var e=e.target;s=e.result,l.default.success("onupgradeneeded in"),e=r.storeConfig,(0,i.default)(e,"storeName").forEach(function(e){var t,o,n,u;s.objectStoreNames.contains(e.storeName)||(o=(t=e).storeName,n=e.key,u=e.initialData,t=s.createObjectStore(o,{keyPath:n,autoIncrement:!0}).transaction,n="create "+o+" 's object store succeed",d.default.transaction(t,n).then(function(){var e,t,n,a,r;u&&(e=o,t=u,n=s.transaction([e],"readwrite"),a=n.objectStore(e),r="add all "+e+" 's initial data done",(0,i.default)(t,"initial").forEach(function(e,t){a.add(e).onsuccess=function(){l.default.success("add initial data["+t+"] successed")}}),d.default.transaction(n,r).then(function(){f(e)}))}))})},e.onsuccess=function(e){var n,a,e=e.target;(s=e.result).onversionchange=function(){s.close(),l.default.fail("A new version of this page is ready. Please reload")},e=r.storeConfig,n=o,(a=(0,i.default)(e,"storeName")).forEach(function(e,t){0===t&&(u=e.storeName),t===a.length-1?f(e.storeName,function(){n(),l.default.success("open indexedDB success")}):f(e.storeName)})},e.onerror=function(e){e=e.target;throw l.default.fail("Something is wrong with indexedDB, for more information, checkout console"),l.default.fail(e.error),new Error(e.error)}):(l.default.fail("Your browser doesn't support a stable version of IndexedDB. You can install latest Chrome or FireFox to handler it"),t())})},getLength:function(){return c[0<arguments.length&&void 0!==arguments[0]?arguments[0]:u]},getNewKey:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u;return c[e]+=1,c[e]},getItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u;return a.default.get(s,e,t)},getConditionItem:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:u;return a.default.getCondition(s,e,t,n)},getAll:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u;return a.default.getAll(s,e)},addItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u;return a.default.add(s,e,t)},removeItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u;return a.default.remove(s,e,t)},removeConditionItem:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:u;return a.default.removeCondition(s,e,t,n)},clear:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u;return a.default.clear(s,e)},updateItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u;return a.default.update(s,e,t)}}},{"./utlis/crud":2,"./utlis/getAllRequest":3,"./utlis/log":4,"./utlis/parseJSONData":5,"./utlis/promiseGenerator":6}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var u=a(e("./promiseGenerator")),l=a(e("./getAllRequest"));function a(e){return e&&e.__esModule?e:{default:e}}n.default={get:function(e,t,n){return e=e.transaction([n]).objectStore(n).get(parseInt(t,10)),n="get "+n+"'s "+e.source.keyPath+" = "+t+" data success",u.default.request(e,n,{property:"result"})},getCondition:function(e,t,n,a){var e=e.transaction([a]),r=[],o="get "+a+"'s "+t+" = "+n+" data success";return(0,l.default)(e,a).onsuccess=function(e){e=e.target.result;e&&(e.value[t]===n&&r.push(e.value),e.continue())},u.default.transaction(e,o,r)},getAll:function(e,t){var e=e.transaction([t]),n=[],a="get "+t+"'s all data success";return(0,l.default)(e,t).onsuccess=function(e){e=e.target.result;e&&(n.push(e.value),e.continue())},u.default.transaction(e,a,n)},add:function(e,t,n){return e=e.transaction([n],"readwrite").objectStore(n).add(t),n="add "+n+"'s "+e.source.keyPath+"  = "+t[e.source.keyPath]+" data succeed",u.default.request(e,n,t)},remove:function(e,t,n){return e=e.transaction([n],"readwrite").objectStore(n).delete(t),n="remove "+n+"'s  "+e.source.keyPath+" = "+t+" data success",u.default.request(e,n,t)},removeCondition:function(e,t,n,a){var e=e.transaction([a],"readwrite"),r="remove "+a+"'s "+t+" = "+n+" data success";return(0,l.default)(e,a).onsuccess=function(e){e=e.target.result;e&&(e.value[t]===n&&e.delete(),e.continue())},u.default.transaction(e,r)},clear:function(e,t){var e=e.transaction([t],"readwrite"),n="clear "+t+"'s all data success";return(0,l.default)(e,t).onsuccess=function(e){e=e.target.result;e&&(e.delete(),e.continue())},u.default.transaction(e,n)},update:function(e,t,n){return e=e.transaction([n],"readwrite").objectStore(n).put(t),n="update "+n+"'s "+e.source.keyPath+"  = "+t[e.source.keyPath]+" data success",u.default.request(e,n,t)}}},{"./getAllRequest":3,"./promiseGenerator":6}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e,t){return e.objectStore(t).openCursor(IDBKeyRange.lowerBound(1),"next")}},{}],4:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={success:function(e){console.log("✓ "+e+" :)")},fail:function(e){console.log("✔ "+e)}}},{}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e,t){try{return JSON.parse(JSON.stringify(e))}catch(e){throw window.alert("please set correct "+t+" array object"),console.log(e),e}}},{}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var e=e("./log"),o=(e=e)&&e.__esModule?e:{default:e};n.default={request:function(n,a,r){return new Promise(function(t,e){n.onsuccess=function(){var e=r;r.property&&(e=n[r.property]),o.default.success(a),t(e)},n.onerror=function(){o.default.fail(n.error),e()}})},transaction:function(n,a,r){return new Promise(function(e,t){n.oncomplete=function(){o.default.success(a),e(r)},n.onerror=function(){o.default.fail(n.error),t()}})}}},{"./log":4}],7:[function(e,t,n){t.exports=e("./dist/indexeddb-crud").default},{"./dist/indexeddb-crud":1}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"JustToDo",version:"23",storeConfig:[{storeName:"list",key:"id",initialData:[{id:0,event:"JustDemo",finished:!0,date:0}]},{storeName:"aphorism",key:"id",initialData:[{id:1,content:"You're better than that"},{id:2,content:"Yesterday You Said Tomorrow"},{id:3,content:"Why are we here?"},{id:4,content:"All in, or nothing"},{id:5,content:"You Never Try, You Never Know"},{id:6,content:"The unexamined life is not worth living. -- Socrates"},{id:7,content:"There is only one thing we say to lazy: NOT TODAY"}]}]}},{}],9:[function(e,t,n){var a=e("indexeddb-crud"),r=l(e("./db/config")),o=l(e("../templete/template")),u=l(e("./utlis/dbSuccess/addEvents")),e=l(e("./utlis/lazyLoadWithoutDB"));function l(e){return e&&e.__esModule?e:{default:e}}(0,o.default)(),(0,a.open)(r.default).then(u.default).catch(e.default)},{"../templete/template":21,"./db/config":8,"./utlis/dbSuccess/addEvents":14,"./utlis/lazyLoadWithoutDB":18,"indexeddb-crud":7}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}},{}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.showInit();var t=document.querySelector("#list");t.addEventListener("click",e.clickLi,!1),t.addEventListener("click",e.removeLi,!1),document.addEventListener("keydown",e.enterAdd,!1),document.querySelector("#add").addEventListener("click",e.add,!1),document.querySelector("#showDone").addEventListener("click",e.showDone,!1),document.querySelector("#showTodo").addEventListener("click",e.showTodo,!1),document.querySelector("#showAll").addEventListener("click",e.showAll,!1),document.querySelector("#showClearDone").addEventListener("click",e.showClearDone,!1),document.querySelector("#showClear").addEventListener("click",e.showClear,!1)}},{}],12:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var e=e("../getFormatDate"),a=(e=e)&&e.__esModule?e:{default:e};n.default={resetInput:function(){document.querySelector("#input").value=""},dataGenerator:function(e,t){return{id:e,event:t,finished:!1,date:(0,a.default)("MM月dd日hh:mm")}}}},{"../getFormatDate":17}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=u(e("../templete/itemGenerator")),r=u(e("../templete/sentenceGenerator")),o=u(e("../clearChildNodes"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){e&&0!==e.length?document.querySelector("#list").innerHTML=n(e):t()}function i(){document.querySelector("#list").innerHTML=(0,r.default)("Welcome~, try to add your first to-do list : )")}function d(e){t=[],n=[],e.forEach(function(e){return(e.finished?t:n).unshift(e)});var t,n,e=n.concat(t);return(0,a.default)(e)}function s(e){return(0,a.default)(e.reverse())}n.default={init:function(e){l(e,i,d)},all:function(e,t){l(t,e,d)},part:function(e,t){l(t,e,s)},clear:function(){(0,o.default)(document.querySelector("#list"))},sentenceHandler:function(e){e=(0,r.default)(e),document.querySelector("#list").innerHTML=e}}},{"../clearChildNodes":10,"../templete/itemGenerator":19,"../templete/sentenceGenerator":20}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=o(e("../dbGeneral/addEventsGenerator")),r=o(e("../dbSuccess/eventsHandler"));function o(e){return e&&e.__esModule?e:{default:e}}n.default=function(){(0,a.default)(r.default)}},{"../dbGeneral/addEventsGenerator":11,"../dbSuccess/eventsHandler":15}],15:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=l(e("indexeddb-crud")),r=l(e("../dbSuccess/refresh")),o=l(e("../dbGeneral/eventsHandlerGeneral")),u=l(e("../templete/itemGenerator"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){var e,t,n=document.querySelector("#input").value;""===n?window.alert("please input a real data~"):(n=n,n=o.default.dataGenerator(a.default.getNewKey(),n),t=(0,u.default)(n),"aphorism"===(e=document.querySelector("#list")).firstChild.className&&e.removeChild(e.firstChild),document.querySelector("#list").insertAdjacentHTML("afterbegin",t),o.default.resetInput(),a.default.addItem(n))}function d(e){var t=e;t.finished=!e.finished,a.default.updateItem(t).then(s)}function s(){a.default.getAll().then(r.default.all)}function c(e){a.default.getConditionItem("finished",e).then(r.default.part)}n.default={add:i,enterAdd:function(e){13===e.keyCode&&i()},clickLi:function(e){(e=e.target).classList.contains("aphorism")||e.getAttribute("data-id")&&(e.classList.toggle("finished"),e=parseInt(e.getAttribute("data-id"),10),a.default.getItem(e).then(d))},removeLi:function(e){var t;"close"===(e=e.target).className&&(document.querySelector("#list").removeChild(e.parentNode),(t=document.querySelector("#list")).lastChild&&"#text"!==t.lastChild.nodeName||r.default.random(),t=parseInt(e.parentNode.getAttribute("data-id"),10),a.default.removeItem(t))},showInit:function(){a.default.getAll().then(r.default.init)},showAll:s,showDone:function(){c(!0)},showTodo:function(){c(!1)},showClearDone:function(){a.default.removeConditionItem("finished",!0).then(a.default.getAll).then(r.default.part)},showClear:function(){r.default.clear(),a.default.clear().then(r.default.random)}}},{"../dbGeneral/eventsHandlerGeneral":12,"../dbSuccess/refresh":16,"../templete/itemGenerator":19,"indexeddb-crud":7}],16:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=o(e("indexeddb-crud")),r=o(e("../dbGeneral/refreshGeneral"));function o(e){return e&&e.__esModule?e:{default:e}}function u(){var e="aphorism",t=Math.ceil(Math.random()*a.default.getLength(e));a.default.getItem(t,e).then(l)}function l(e){e=e.content;r.default.sentenceHandler(e)}n.default={init:r.default.init,all:r.default.all.bind(null,u),part:r.default.part.bind(null,u),clear:r.default.clear,random:u}},{"../dbGeneral/refreshGeneral":13,"indexeddb-crud":7}],17:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=new Date,n={"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes()},a=e;return Object.keys(n).forEach(function(e){var t;new RegExp("("+e+")").test(a)&&(a="y+"===e?a.replace(RegExp.$1,(""+n[e]).substr(4-RegExp.$1.length)):"S+"===e?(t=RegExp.$1.length,a.replace(RegExp.$1,("00"+n[e]).substr((""+n[e]).length-1,t=1===t?3:t))):a.replace(RegExp.$1,1===RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length)))}),a}},{}],18:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="./dist/scripts/lazyLoad.min.js",document.body.appendChild(e)}},{}],19:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e;return(0,Handlebars.templates.li)({listItems:t=Array.isArray(e)?t:[e]}).trim()}},{}],20:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,Handlebars.templates.li)({sentence:e}).trim()}},{}],21:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=function(){var e=Handlebars.template;(Handlebars.templates=Handlebars.templates||{}).li=e({1:function(e,t,n,a,r){var o;return'  <li class="aphorism">'+e.escapeExpression("function"==typeof(o=null!=(o=n.sentence||(null!=t?t.sentence:t))?o:n.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"sentence",hash:{},data:r}):o)+"</li>\n"},3:function(e,t,n,a,r){return null!=(n=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.listItems:t,{name:"each",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r}))?n:""},4:function(e,t,n,a,r){return null!=(n=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.finished:t,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.program(7,r,0),data:r}))?n:""},5:function(e,t,n,a,r){var o,u=null!=t?t:e.nullContext||{},l=n.helperMissing,i="function",e=e.escapeExpression;return'      <li class="finished" data-id='+e((void 0===(o=null!=(o=n.id||(null!=t?t.id:t))?o:l)?"undefined":d(o))===i?o.call(u,{name:"id",hash:{},data:r}):o)+">\n        "+e((void 0===(o=null!=(o=n.date||(null!=t?t.date:t))?o:l)?"undefined":d(o))===i?o.call(u,{name:"date",hash:{},data:r}):o)+" : \n        <span>"+e((void 0===(o=null!=(o=n.event||(null!=t?t.event:t))?o:l)?"undefined":d(o))===i?o.call(u,{name:"event",hash:{},data:r}):o)+'</span>\n        <span class="close">×</span>\n      </li>\n'},7:function(e,t,n,a,r){var o,u=null!=t?t:e.nullContext||{},l=n.helperMissing,i="function",e=e.escapeExpression;return"      <li data-id="+e((void 0===(o=null!=(o=n.id||(null!=t?t.id:t))?o:l)?"undefined":d(o))===i?o.call(u,{name:"id",hash:{},data:r}):o)+">\n        "+e((void 0===(o=null!=(o=n.date||(null!=t?t.date:t))?o:l)?"undefined":d(o))===i?o.call(u,{name:"date",hash:{},data:r}):o)+" : \n        <span>"+e((void 0===(o=null!=(o=n.event||(null!=t?t.event:t))?o:l)?"undefined":d(o))===i?o.call(u,{name:"event",hash:{},data:r}):o)+'</span>\n        <span class="close">×</span>\n      </li>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,r){return null!=(n=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.sentence:t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r}))?n:""},useData:!0})}},{}]},{},[9]);